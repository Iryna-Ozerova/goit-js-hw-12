{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// http запит на бек\nimport axios from 'axios';\n\nconst API_KEY = '49186769-dabefba962826c776b77806d1';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet PER_PAGE = 15; //ліміт по зображенням\nlet page = 1; // початкове значення сторінки\nlet totalHits = 0; // загальна к-сть результатів\n\n// функція для отримання зображень\nexport async function searchImages(query) {\n  try {\n        const response = await axios\n            .get(BASE_URL, {\n                params: {\n                    key: API_KEY,\n                    q: query,\n                    image_type: 'photo',\n                    orientation: 'horizontal',\n                    safesearch: true,\n                    per_page: PER_PAGE, \n                    page: page, \n                },\n            });\n      page += 1;\n      return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        return [];\n    }\n}\n\n// повертаємо значення page до початкового\nexport function resetPage() {\n  page = 1;\n}\n\n","// Функції інтерфейсу\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\n// Функція для створення карток зображень\nexport function createImageMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"tittle\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`).join('');\n}\n\n// Функція для оновлення галереї\nexport function updateGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', createImageMarkup(images));\n  lightbox.refresh(); // Оновлюємо SimpleLightbox після додавання нових зображень\n}\n\n// Функція для показу повідомлення про помилку\nexport function showNoResultsMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}","import { searchImages, resetPage } from './js/pixabay-api.js';\nimport { updateGallery, showNoResultsMessage } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-load');\nconst btnLoad = document.querySelector('.btn-load');\n\n\nloader.style.display = 'none';\nbtnLoad.style.display = 'none';\nloaderMore.style.display = 'none'; // приховуємо loaderMore\n\nform.addEventListener('submit', function (event) {\n    event.preventDefault();\n\n    const query = input.value.trim();\n    \n  if (query === '') {\n    showNoResultsMessage('Please enter a search query!');\n    return;\n  }\n    \n    resetPage(); // скидаємо page при новому пошуку\n    gallery.innerHTML = ''; // очищаємо галерею перед новим пошуком\n    btnLoad.style.display = 'none'; //приховуємо btnLoad при повторному сабміті\n    loader.style.display = 'block'; \n    \n\n  searchImages(query)\n    .then(images => {\n        loader.style.display = 'none'; \n      if (images.length === 0) {\n        showNoResultsMessage('Sorry, there are no images matching your search query. Please try again!');\n        return;\n      }\n        updateGallery(images);\n        btnLoad.style.display = 'block'; // показуємо кнопку, якщо є результат\n    })\n      .catch(error => {\n        loader.style.display = 'none';\n      showNoResultsMessage('Error fetching images. Please try again!');\n      console.error('Помилка сервера:', error.message);\n    });\n  form.reset();\n});\n\n//подія на btnLoad\n\nbtnLoad.addEventListener('click', () => {\n    loaderMore.style.display = 'block'; // Показуємо лоадер\n     btnLoad.style.display = 'none';\n    \n    searchImages(input.value.trim())\n        .then(images => {\n        setTimeout(() => { // додаємо затримку для лоадера\n            loaderMore.style.display = 'none';\n\n            if (images.length === 0) {\n                btnLoad.style.display = 'none'; // Ховаємо кнопку, якщо більше немає зображень\n                showNoResultsMessage(\"We're sorry, but you've reached the end of search results.\");\n                return;\n            }\n\n            updateGallery(images);\n            btnLoad.style.display = 'block';\n        }, 100); // штучна затримка для перевірки лоадера\n    }).catch(error => {\n        loaderMore.style.display = 'none'; // Ховаємо лоадер у разі помилки\n        showNoResultsMessage('Error loading more images.');\n        console.error('Помилка сервера:', error.message);\n    });\n});\n\n\n"],"names":["API_KEY","BASE_URL","PER_PAGE","page","searchImages","query","response","axios","error","resetPage","lightbox","SimpleLightbox","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","showNoResultsMessage","message","iziToast","form","input","gallery","loader","loaderMore","btnLoad","event"],"mappings":"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"}
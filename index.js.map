{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// http запит на бек\nimport axios from 'axios';\n\nconst API_KEY = '49186769-dabefba962826c776b77806d1';\nconst BASE_URL = 'https://pixabay.com/api/';\nlet PER_PAGE = 15;\nlet page = 1;\n\n// функція для отримання зображень\nexport async function searchImages(query) {\n  try {\n        const response = await axios\n            .get(BASE_URL, {\n                params: {\n                    key: API_KEY,\n                    q: query,\n                    image_type: 'photo',\n                    orientation: 'horizontal',\n                    safesearch: true,\n                    per_page: PER_PAGE, \n                    page: page, \n                },\n            });\n      page += 1;\n      return response.data.hits;\n    } catch (error) {\n        console.error('Error fetching images:', error.message);\n        return [];\n    }\n}\n\n\n\n// повертаємо значення page до початкового\nexport function resetPage() {\n  page = 1;\n}\n\n","// Функції інтерфейсу\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n// Ініціалізація SimpleLightbox\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captions: true,\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\n\n// Функція для створення карток зображень\nexport function createImageMarkup(images) {\n  return images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        </a>\n        <div class=\"thumb-block\">\n          <div class=\"block\"><h2 class=\"tittle\">Likes</h2><p class=\"amount\">${likes}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Views</h2><p class=\"amount\">${views}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Comments</h2><p class=\"amount\">${comments}</p></div>\n          <div class=\"block\"><h2 class=\"tittle\">Downloads</h2><p class=\"amount\">${downloads}</p></div>\n        </div>\n      </li>`).join('');\n}\n\n// Функція для оновлення галереї\nexport function updateGallery(images) {\n  const gallery = document.querySelector('.gallery');\n  gallery.insertAdjacentHTML('beforeend', createImageMarkup(images));\n  lightbox.refresh(); // Оновлюємо SimpleLightbox після додавання нових зображень\n  smoothScroll(); // додаємо скролл\n}\n\nexport function showNoResultsMessage(message) {\n  iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function smoothScroll() {\n  const firstCard = document.querySelector('.gallery-item'); \n\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height; \n\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: \"smooth\",\n    });\n  }\n}","import { searchImages, resetPage } from './js/pixabay-api.js';\nimport { updateGallery, showNoResultsMessage } from './js/render-functions.js';\nimport { smoothScroll } from './js/render-functions.js';\n\nconst form = document.querySelector('.form');\nconst input = document.querySelector('.input-search');\nconst gallery = document.querySelector('.gallery');\nconst loader = document.querySelector('.loader');\nconst loaderMore = document.querySelector('.loader-load');\nconst btnLoad = document.querySelector('.btn-load');\n\nloader.style.display = 'none';\nbtnLoad.style.display = 'none';\nloaderMore.style.display = 'none'; // приховуємо loaderMore\n\nlet currentQuery = ''; // запам'ятовуємо пошуковий запит\n\nform.addEventListener('submit', function (event) {\n    event.preventDefault();\n\n    const query = input.value.trim();\n    \n  if (query === '') {\n    showNoResultsMessage('Please enter a search query!');\n    return;\n  }\n    \n    resetPage();\n    gallery.innerHTML = ''; \n    btnLoad.style.display = 'none';\n  loader.style.display = 'block'; \n  \n  currentQuery = query; // зберігаємо запит перед очищенням поля\n    \n\n  searchImages(currentQuery)\n    .then(images => {\n      loader.style.display = 'none'; \n      \n      if (images.length === 0) { \n        showNoResultsMessage('Sorry, there are no images matching your search query. Please try again!');\n        return;\n      }\n        updateGallery(images);\n      btnLoad.style.display = 'block';\n    })\n      .catch(error => {\n        loader.style.display = 'none';\n      showNoResultsMessage('Error fetching images. Please try again!');\n      console.error('Помилка сервера:', error.message);\n    });\n  form.reset();\n  });\n  \n\n//подія на btnLoad\n\nbtnLoad.addEventListener('click', async () => {\n  if (currentQuery === '') return;\n    loaderMore.style.display = 'block'; \n     btnLoad.style.display = 'none';\n  await searchImages(currentQuery) // збережений запит \n        .then(images => {\n            loaderMore.style.display = 'none';\n\n            if (images.length === 0) {\n                btnLoad.style.display = 'none';\n                showNoResultsMessage(\"We're sorry, but you've reached the end of search results.\");\n                return;\n            }\n\n          updateGallery(images);\n          smoothScroll();\n          btnLoad.style.display = 'block';\n          \n    }).catch(error => {\n        loaderMore.style.display = 'none'; \n        showNoResultsMessage('Error loading more images.');\n        console.error('Помилка сервера:', error.message);\n    });\n});\n\n\n"],"names":["API_KEY","BASE_URL","PER_PAGE","page","searchImages","query","response","axios","error","resetPage","lightbox","SimpleLightbox","createImageMarkup","images","webformatURL","largeImageURL","tags","likes","views","comments","downloads","updateGallery","smoothScroll","showNoResultsMessage","message","iziToast","firstCard","cardHeight","form","input","gallery","loader","loaderMore","btnLoad","currentQuery","event"],"mappings":"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"}